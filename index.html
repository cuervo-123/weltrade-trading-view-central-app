<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TradingView con Herramientas Personalizadas</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #101010;
      color: white;
    }
    header {
      padding: 1rem;
      background: #1e1e1e;
      text-align: center;
    }
    #tradingview-container {
      position: relative;
      height: 80vh;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .mark-line {
      position: absolute;
      height: 2px;
      width: 100%;
      background: red;
      z-index: 2;
      cursor: move;
    }
    .toolbox {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 5px;
      z-index: 3;
    }
    .toolbox button {
      display: block;
      margin-bottom: 5px;
      background: #333;
      color: #fff;
      border: none;
      padding: 5px;
      border-radius: 3px;
      cursor: pointer;
    }
    .toolbox button:hover {
      background: #555;
    }
    .overlay-message {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.8);
      padding: 8px 12px;
      border-radius: 5px;
      z-index: 4;
      font-size: 14px;
    }
    .capture-box {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 5px;
      z-index: 3;
    }
    .capture-box button, .capture-box input {
      margin-top: 5px;
      display: block;
    }
    #btn-volver {
      position: absolute;
      bottom: 10px;
      list-style-position: 50%;
      transform: translateX(-50%);
      z-index: 6;
      background: #ff4444;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ“ˆ TradingView + Herramientas Personalizadas</h1>
  </header>

  <div id="tradingview-container">
    <div class="toolbox">
      <button onclick="modoGrafico()">ğŸ–±ï¸ Modo grÃ¡fico</button>
      <button onclick="modoLineas()">ğŸ“ Modo lÃ­neas</button>
      <button onclick="limpiarLineas()">ğŸ§¹ Limpiar</button>
    </div>
    <div class="capture-box">
      <button onclick="tomarCaptura()">ğŸ“¸ Capturar imagen</button>
      <button onclick="toggleGrabacion()" id="btn-grabar">ğŸ¥ Iniciar grabaciÃ³n</button>
      <button onclick="seleccionarYReproducirVideo()">ğŸ“‚ Cargar video local (.webm)</button>
    </div>
    <div class="overlay-message" id="modo-actual"></div>
    <button id="btn-volver" onclick="volverAGrafico()">ğŸ”™ Volver al grÃ¡fico</button>
    <iframe id="tv-iframe" src="https://charts.deriv.com/deriv"></iframe>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<!-- MenÃº -->
<div id="menu">
  <button onclick="mostrarSeccion('tv')">ğŸ“º TV en Vivo</button>
  </div>

<!-- Contenido -->
<div id="content">
  
  4 Random monitors and integrated YouTube Central  
<div id="tv" class="section active">
  <h2>ğŸ“º TV en Vivo</h2>
  <p>IPTV web app with support for up to four simultaneous screens, M3U and JSON playlists, dark UI, favorites, autoplay and live preview, and YouTube Superload. Click below to open 4 Random monitors and integrated YouTube Central </p>
  <button onclick="window.location.href='https://cuervo-123.github.io/mi-tv-station-v-10.1/'">
    ğŸŒ Go to 4 Random Monitors with integrated YouTube central app
  </button>
</div>

Country Iptv central
<div id="tv" class="section active">
  <h2>ğŸ“º TV en Vivo</h2>
  <p>ğŸŒ Country IPTV Central
An IPTV web app with country-based autoplay / Una app IPTV con reproducciÃ³n automÃ¡tica por paÃ­s.
âš¡ Discover channels from around the world, instantly and seamlessly.
ğŸ‘‰ Click below to open Country IPTV Central / Haz clic abajo para abrir Country IPTV Central.:</p>
  <button onclick="window.location.href='https://cuervo-123.github.io/tv4you/'">
    ğŸŒ Go to My Country IPTV Central
  </button>
</div>
tradingview central app
<div id="tv" class="section active">
  <h2>ğŸ“º TV en Vivo</h2>
  <p> TradingView Central is your ultimate hub for traders.
Discover tools, insights, and seamless integrationâ€”all in one place.ğŸ“Š â€œYour ultimate hub for traders / Tu centro definitivo para tradersâ€
ğŸš€ â€œDiscover tools, insights & integration / Descubre herramientas, ideas e integraciÃ³nâ€
ğŸŒ â€œAll in one place / Todo en un solo lugarâ€
ğŸ‘‰ â€œExplore the power of TradingView Central / Explora el poder de TradingView Centralâ€ğŸ‘‰ Click below and start exploring the power of TradingView Central! :</p>
  <button onclick="window.location.href='https://cuervo-123.github.io/tv-trading-view-central-app-for-traders/'">
    ğŸŒ Ir a Mi tradingview central app
  </button>
</div>
  

 Weltrade tradingview central 
<div id="tv" class="section active">
  <h2>ğŸ“º TV en Vivo</h2>
  <p> Weltrade TradingView Central App is the ultimate TradingView experience tailored for Weltrade customers.
Unlock powerful tools and seamless trading insights.ğŸ’¼ â€œThe ultimate TradingView experience / La experiencia definitiva de TradingViewâ€
ğŸŒ â€œTailored for Weltrade customers / DiseÃ±ada para clientes de Weltradeâ€
âš¡ â€œUnlock tools & insights / Desbloquea herramientas y perspectivasâ€
ğŸ‘‰ â€œOpen the Weltrade TradingView Central App / Abre la app Weltrade TradingView Centralâ€ğŸ‘‰ Click below to open the Weltrade TradingView Central App! :</p>
  <button onclick="window.location.href='https://cuervo-123.github.io/weltrade-trading-view-central-app/'">
    ğŸŒ Ir a Mi Weltrade tradingview central app
  </button>
</div>
  
My Tv Station Upload Central
<div id="tv" class="section active">
<h2>ğŸ“º TV en Vivo</h2>
<p>AplicaciÃ³n IPTV Web App with seamless uploads, M3U & JSON playlists, a sleek dark interface, favorites management, and auto-play features.
All enhanced with a custom logo and a smart side menu for faster, more versatile browsing.ğŸŒ â€œStream smarter / Transmite mÃ¡s inteligenteâ€
ğŸš€ â€œYour IPTV hub â€” Tu centro IPTVâ€
ğŸ¬ â€œAll your channels, one app / Todos tus canales en una sola appâ€
ğŸŒŒ â€œEndless IPTV, endless control / IPTV sin fin, control totalâ€:</p>
<button onclick="window.location.href='https://cuervo-123.github.io/mi-tv-station/'">
  ğŸŒ Ir a My Tv Station Upload Central
</button>
</div>
Channel Editor & Favorites Export Central 
<div id="tv" class="section active">
<h2>ğŸ“º TV en Vivo</h2>
<p>ğŸ–¥ï¸ 4 Random Monitors & YouTube Central
An IPTV web app with up to four simultaneous screens, M3U & JSON playlists, a sleek dark UI, favorites, autoplay, live preview, and YouTube Superload.
ğŸ“Š Now with TradingView integrated into every monitor / Ahora con TradingView integrado en cada monitor.
ğŸ‘‰ Click below to open 4 Random Monitors & Integrated YouTube Central / Haz clic abajo para abrir 4 Monitores Aleatorios & YouTube Central Integrado. :</p>
<button onclick="window.location.href='https://cuervo-123.github.io/GLOBALTV4YOU/'">
  ğŸŒ Ir a Mi Editor  de  Canales AND Esportar Favoritos Central
</button>
</div>
Mega Editor Pro  All Central App 
<div id="tv" class="section active">
<h2>ğŸ“º TV en Vivo</h2>
<p>ğŸ› ï¸ Channel Editor & Favorites Export Central
An IPTV web app with M3U & JSON playlists, a sleek dark interface, and favorites management.
âœ¨ Perfect for editing and exporting your lists in .m3u and .json formats / Ideal para editar y exportar tus listas en formatos .m3u y .json.
ğŸ‘‰ Click below to open Mi TV Station / Haz clic abajo para abrir Mi TV Station.:</p>
<button onclick="window.location.href='https://cuervo-123.github.io/Editor-iptv-Plus/'">
  ğŸŒ Ir a Mega Editor Pro  All Central App 
</button>
</div>
  MOVIES Central App 
<div id="tv" class="section active">
<h2>ğŸ“º TV en Vivo</h2>
<p>ğŸ¥ Movies Central App
Your ultimate hub for nonstop movies and entertainment / Tu centro definitivo para pelÃ­culas y entretenimiento sin fin.
ğŸŒŒ Stream with a sleek dark interface, favorites, and autoplay features.
ğŸ‘‰ Click below to open Movies Central App / Haz clic abajo para abrir Movies Central App.:</p>
<button onclick="window.location.href='https://movie-verse-sage.vercel.app/'">
  ğŸŒ Ir a movies Central App 
</button>
</div>    
</script>

</body>


  <script>
    let container = document.getElementById("tradingview-container");
    let overlayMsg = document.getElementById("modo-actual");
    let activo = false;

    function mostrarMensaje(msg) {
      overlayMsg.textContent = msg;
      overlayMsg.style.display = "block";
      setTimeout(() => overlayMsg.style.display = "none", 3000);
    }

    function modoGrafico() {
      activo = false;
      container.style.cursor = "default";
      document.querySelectorAll(".mark-line").forEach(line => line.style.pointerEvents = "none");
      document.getElementById("tv-iframe").style.pointerEvents = "auto";
      mostrarMensaje("ğŸ–±ï¸ Modo grÃ¡fico activado");
    }

    function modoLineas() {
      activo = true;
      container.style.cursor = "crosshair";
      document.querySelectorAll(".mark-line").forEach(line => line.style.pointerEvents = "auto");
      document.getElementById("tv-iframe").style.pointerEvents = "none";
      mostrarMensaje("ğŸ“ Modo lÃ­neas activado");
    }

    function limpiarLineas() {
      document.querySelectorAll(".mark-line").forEach(line => line.remove());
      mostrarMensaje("ğŸ§¹ LÃ­neas eliminadas");
    }

    container.addEventListener("click", function (e) {
      if (!activo) return;
      const y = e.clientY - container.getBoundingClientRect().top;
      const linea = document.createElement("div");
      linea.className = "mark-line";
      linea.style.top = y + "px";

      let isDragging = false;
      let offsetY;

      linea.addEventListener("mousedown", (e) => {
        isDragging = true;
        offsetY = e.offsetY;
        e.preventDefault();
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        const containerTop = container.getBoundingClientRect().top;
        const newY = e.clientY - containerTop - offsetY;
        linea.style.top = `${newY}px`;
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
      });

      linea.addEventListener("dblclick", () => {
        linea.remove();
      });

      container.appendChild(linea);
    });

    modoGrafico();

    function tomarCaptura() {
      html2canvas(container).then(canvas => {
        const link = document.createElement("a");
        link.download = "captura_chart.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    let mediaRecorder;
    let recordedChunks = [];
    let grabando = false;

    function toggleGrabacion() {
      const btn = document.getElementById("btn-grabar");
      if (!grabando) {
        navigator.mediaDevices.getDisplayMedia({ video: true, audio: false })
          .then(stream => {
            mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.ondataavailable = event => {
              if (event.data.size > 0) recordedChunks.push(event.data);
            };
            mediaRecorder.onstop = () => {
              const blob = new Blob(recordedChunks, { type: "video/webm" });
              const url = URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.href = url;
              a.download = "grabacion_chart.webm";
              a.click();
              recordedChunks = [];
            };
            mediaRecorder.start();
            btn.textContent = "â¹ï¸ Detener grabaciÃ³n";
            grabando = true;
          })
          .catch(err => alert("Error al iniciar grabaciÃ³n: " + err));
      } else {
        mediaRecorder.stop();
        btn.textContent = "ğŸ¥ Iniciar grabaciÃ³n";
        grabando = false;
      }
    }

    function seleccionarYReproducirVideo() {
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "video/webm";

      input.onchange = async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const url = URL.createObjectURL(file);

        const video = document.createElement("video");
        video.src = url;
        video.muted = true;
        video.autoplay = true;
        video.style.position = "fixed";
        video.style.bottom = "10px";
        video.style.right = "10px";
        video.style.width = "320px";
        video.controls = true;
        video.style.zIndex = 9999;

        document.body.appendChild(video);

        try {
          await video.play();
          await video.requestPictureInPicture();
        } catch (err) {
          console.error("No se pudo activar PiP:", err);
          alert("âš ï¸ No se pudo activar el modo PiP.");
        }
      };

      input.click();
    }

    function volverAGrafico() {
      document.getElementById("tv-iframe").style.display = "block";
      document.getElementById("btn-volver").style.display = "none";
    }
  </script>
</body>
</html>
